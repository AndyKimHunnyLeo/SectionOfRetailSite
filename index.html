<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    />
    <title>Document</title>
  </head>
  <body>
    <header class="header">
      <p class="cart" id="my_cart" onclick="cartPreview()">My Cart</p>
      <i
        class="fas fa-shopping-cart"
        id="cart_icon"
        onclick="cartPreview()"
      ></i>
      <p class="cart" id="quantity" onclick="cartPreview()">(0)</p>

      <section class="cart_preview" id="cart_preview">
        <div class="cart_preview_container" id="small">
          <img
            src="Resource/classic-tee.jpg"
            alt="classic-tee"
            class="classic_tee_preview"
          />
          <div class="text_preview_container">
            <p class="preview_text first_text">Classic Tee</p>
            <div class="preview_price_container">
              <p class="preview_text" id="small_quatity"></p>
              <p class="preview_text preview">$75</p>
            </div>
            <p class="preview_text">Size: S</p>
          </div>
        </div>

        <div class="cart_preview_container" id="medium">
          <img
            src="Resource/classic-tee.jpg"
            alt="classic-tee"
            class="classic_tee_preview"
          />
          <div class="text_preview_container">
            <p class="preview_text first_text">Classic Tee</p>
            <div class="preview_price_container">
              <p class="preview_text" id="medium_quatity"></p>
              <p class="preview_text preview">$75</p>
            </div>
            <p class="preview_text">Size: M</p>
          </div>
        </div>

        <div class="cart_preview_container" id="large">
          <img
            src="Resource/classic-tee.jpg"
            alt="classic-tee"
            class="classic_tee_preview"
          />
          <div class="text_preview_container">
            <p class="preview_text first_text">Classic Tee</p>
            <div class="preview_price_container">
              <p class="preview_text" id="large_quatity"></p>
              <p class="preview_text preview">$75</p>
            </div>
            <p class="preview_text">Size: L</p>
          </div>
        </div>
      </section>
    </header>

    <main>
      <img
        src="Resource/classic-tee.jpg"
        alt="classic-tee"
        class="classic_tee"
      />
      <summary class="details">
        <h3 class="product_name">Classic Tee</h3>
        <hr />
        <p class="price">$75</p>
        <hr />
        <p class="text">
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Laborum
          molestias vel voluptatum modi in? Iure, eos vitae libero quia ipsam
          asperiores corporis quisquam odio quas? Dolore similique harum
          corrupti eum!
        </p>
        <div class="size_container">
          <p class="text">SIZE</p>
          <p class="required_star">*</p>
          <p id="selected_size" class="text"></p>
        </div>

        <container class="size_button_container">
          <button class="size_button" id="S" onclick="displaySize(this.id)">
            S
          </button>
          <button class="size_button" id="M" onclick="displaySize(this.id)">
            M
          </button>
          <button class="size_button" id="L" onclick="displaySize(this.id)">
            L
          </button>
        </container>
        <button class="add_to_cart_button" onclick="addToCart()">
          ADD TO CART
        </button>
      </summary>
    </main>
  </body>
  <script>
    let quantity = 0;
    let smallSize = 0;
    let mediumSize = 0;
    let largeSize = 0;
    let chosenSize = null;
    function displaySize(clicked_id) {
      document.getElementById('selected_size').innerHTML = clicked_id;
      resetToggle();
      document.getElementById(clicked_id).classList.toggle('selected');
      chosenSize = clicked_id;
    }

    function resetToggle() {
      document.getElementById('S').classList.remove('selected');
      document.getElementById('M').classList.remove('selected');
      document.getElementById('L').classList.remove('selected');
    }

    function addToCart() {
      if (chosenSize === null) {
        alert('Size is not selected');
        return;
      }
      document.getElementById('quantity').innerHTML = ` (${quantity + 1})`;
      quantity++;
      console.log(chosenSize);
      if (chosenSize === 'S') {
        smallSize++;
      } else if (chosenSize === 'M') {
        mediumSize++;
      } else if (chosenSize === 'L') {
        largeSize++;
      }
    }

    function cartPreview() {
      document.getElementById('cart_preview').classList.toggle('show');
      if (smallSize > 0) {
        document.getElementById('small').classList.toggle('show');
        document.getElementById('small_quatity').innerHTML = `${smallSize} x `;
      }
      if (mediumSize > 0) {
        document.getElementById('medium').classList.toggle('show');

        document.getElementById(
          'medium_quatity'
        ).innerHTML = `${mediumSize} x `;
      }
      if (largeSize > 0) {
        document.getElementById('large').classList.toggle('show');
        document.getElementById('large_quatity').innerHTML = `${largeSize} x `;
      }
    }
  </script>
</html>
